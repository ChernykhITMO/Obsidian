## Нормализация  
- приведение БД к неким нормальным формам

## Задачи, которые решает *нормализация*
- уменьшение дублирование информации
- уменьшение объёмов хранения информации 
- исключение аномалий(таблица - регион проживания, добавление чуть некорректных данных - аномалия, или аномалия может появиться при изменении/удалении данных)
Реакция на амолию:
- SQL не разрешает
- автоматически заменить на неопределенность
- заменить на базовое значение 
- игнорировать(пусть так и будет)
- каскадные действия(удалить всю пятую категорию)
#### Задача нормализации - уйти от этих аномалий 

## Декомпозиция 
Разбиваем таблицу на две или более, чтобы можно было соединить их обратно без потерь
*пример 1 - в тетради*
*пример 2 с потерями -  в тетради*


Зависимость - ситуация, в отношении одного атрибута зависит значение другого атрибута
(если знаю значение А, то точно знаю значение Б)
(название региона, коррелирует с номером региона)

**Частичная функциональная зависимость** - когда атрибут (не ключевой) зависит от части потенциального ключа
пр. Потенциальный ключ - ФИО и номер группы
Факультет зависит от группы
М3219 - гарантированно факультет ИТИП

**Полная функциональная зависимость** - атрибут зависит от всего потенциального ключа

**Транзитивная зависимость** - ситуация, атрибут А определяет атрибут Б и атрибут Б определяет атрибут С

пр. 

**Первая нормальная форма** - гарантия того, что таблица может быть рассмотрена, как отношение 
- все кортежи уникальны 
- значения ячейки - атомарны

пр. Если студент изучает несколько предметов, то в столбце предметов стоит только один предмет 

Уровень атомарности определяется во много бизнес логикой 

**Вторая нормальная форма** - отношение находится в первой нормальной форме, все атрибуты полно зависят от первичного ключа 
и отсутствуют частичные функциональные зависимости  (?)

пр. Учебное заведение 
Есть курс, название курса, слушатель курса

*пр 3 в тетради*

**Третья нормальная форма** - отношение находится во второй нормальной форме, все не ключевые атрибуты взаимно независимы, т.е. зависят от первичного ключа

*пр. 4 в тетради*

Нормальная форма Boyce Codde (==**BCNF**==)(продолжение третьей нормальной формы)  - ситуация, когда детерминанты(определители зависимостей) являются потенциальными ключами
пр5 в тетради

id stud and id proj - потенц ключ

если предположить ФИО унинальным, то .. .

...



**Четвёртая нормальная форма** - ситуация, когда таблица находится в BCNF и отсутствуют многозначные зависимости 

*пр 6 в тетради*

зависимость - преоподаватель - предмет
препод - язык


**Пятая нормальная форма** - соединение зависимостей, отношение в четвёртой нормальной форме и не может быть декомпозирована без потери данных

пр 7 в тетради


**Шестая нормальная форма** - отношение в пятой нормальной форме, и каждое непустое отношение не разложимо по соединению 

База временных рядов - набор таблиц, где есть:
- ключ
- начало временного ряда
- конец
- значение 
Общие правила:
Нужно оценить какие операции с БД будем выполнять 

Продуктивная - БД ориентированная на транзакции


## Увеличение производительности 

Вводится понятие Индексов 

Индекс - механизм, который увеличивает производительность, за счёт применения дополнительных хранительных информаций

Все БД по умолчанию индексируются по первичному ключу  - первчиные индексы

Вторичные индексы - посмотроены на полях, отличные от того, что было построено при создании таблицы

Индексы так или иначе строятся на основании деревьев

Индексы могут строить по одному атрибуту(столбцу) или нескольким 

Индексы строятся на строках, удовлетворяющих условию 

Глубина дерева - определяет скорость работы

Индексы крайне затрудняют работу с обновлением, удалением данных - *долго*

Индексы всегда строятся слева направо со строковыми данными(по правилам чтения слов)

Кластерный индекс - таблица, ситуация, когда на нижних листах хранятся фактически строки

Некластерные строки - на нижних листах хранятся ссылки на область, где будут находиться наши данные

Кроме индексов основанных на деревьях, бывают хэш индексы. Значение - адрес на диске, где хранится строчка.

Битовые маски - столбец хранит 3 варианта значения
3 битовых массива 

....


#### Представления 

механизм, который позволяет именовать результат выполнения запросы 

берём запрос и говорим, что он называется так 

Преимущества:
- Нужны для лучшей визуализации данных
- Полезная штука про безопасность (данные только для отдела)
- Обратная совместимсть
- Эмуляция архитектуры 

Представления двух видов:
Классическое(имя запроса) и Материализованное(снимок, данные, которые были на момент создания представления)
пр. 


Плюсы Материлизовапредставления:
-  афва
- Обновляемость(через представление можно обновлять данные)
пр. гурпы с 15-19, могу обновить студенту фамилию


Представления используются для улучшения


DataMarts - термин хранилищ данных, исп для визуализации части данных 
-витрина данных в хранилище данных
всего лишь визуализация 
















